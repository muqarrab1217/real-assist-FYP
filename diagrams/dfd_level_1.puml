@startuml
left to right direction
skinparam linetype ortho
skinparam packageStyle rectangle
skinparam nodesep 60
skinparam ranksep 70
skinparam ArrowThickness 1

actor "Visitor / Client" as User
actor "Admin" as Admin

rectangle "Frontend (React)" as Front {
  rectangle "Landing Page" as Landing
  rectangle "Client Dashboard" as ClientDash
  rectangle "Admin Dashboard" as AdminDash
  rectangle "Chatbot Widget" as ChatbotUI
}

rectangle "Frontend API Layer" as FrontAPI {
  rectangle "authAPI" as authAPI
  rectangle "clientAPI" as clientAPI
  rectangle "adminAPI" as adminAPI
  rectangle "commonAPI" as commonAPI
}

rectangle "Backend Services" as Backend {
  rectangle "Auth Service" as AuthService
  rectangle "Lead Service" as LeadService
  rectangle "Payment Service" as PaymentService
  rectangle "Assistant Service" as AssistantService
}

database "MongoDB" as DB
rectangle "AI/ML Pipeline" as ML {
  rectangle "Classifier" as Classifier
  rectangle "RAG Retriever" as RAGRetriever
}

User -> Landing : view projects / capture lead
Landing -> FrontAPI : POST /leads (create)
FrontAPI -> AuthService : POST /leads
AuthService -> DB : insert lead (status: pending)
AuthService -> Classifier : async classify(lead)
Classifier --> AuthService : classification result (score, status)
AuthService -> DB : update lead (score, status)
AuthService --> FrontAPI : return created lead
FrontAPI --> Landing : show success

User -> ClientDash : request payments
ClientDash -> FrontAPI : clientAPI.getPayments()
FrontAPI -> PaymentService : GET /clients/{id}/payments
PaymentService -> DB : fetch payments
PaymentService --> FrontAPI : payments list
FrontAPI --> ClientDash : render payments

User -> ClientDash : click Pay Now
ClientDash -> FrontAPI : clientAPI.makePayment(paymentId, amount, method)
FrontAPI -> PaymentService : initiate payment
PaymentService -> PaymentService : call external gateway
PaymentService --> FrontAPI : payment result
FrontAPI --> ClientDash : show confirmation

Admin -> AdminDash : view leads
AdminDash -> FrontAPI : adminAPI.getLeads()
FrontAPI -> LeadService : GET /leads
LeadService -> DB : query leads
LeadService --> FrontAPI : leads
FrontAPI --> AdminDash : render leads

ChatbotUI -> FrontAPI : POST /assistant/query
FrontAPI -> AssistantService : /assistant/query
AssistantService -> RAGRetriever : retrieve docs
RAGRetriever --> AssistantService : docs
AssistantService -> Classifier : (optional) call LLM
Classifier --> AssistantService : answer
AssistantService --> FrontAPI : assistant response
FrontAPI --> ChatbotUI : display

note right of Front
Frontend files mapping:
- src/services/api.ts (frontend api layer)
- src/hooks/useAuth.ts & src/contexts/AuthContext.tsx
- src/pages/* and src/components/*
end note

@enduml
